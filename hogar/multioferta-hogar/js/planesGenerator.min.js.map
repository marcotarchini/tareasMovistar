{"version":3,"sources":["planesGenerator.min.js"],"names":["apiPlanes","document","location","origin","planesJson","contenedoresParaActualizar","jsonDataContenedor","$","filtraContenedoresMasDatos","contenedoresPlanes","querySelectorAll","x","length","largoDeClase","classList","idDeClase","slice","push","promedioDescuento","tipo","total","count","parseInt","swapPuntoComaPlanes","ammount","toLocaleString","replace","formatoDatosAntes","precioString","unidad","llenarPlanes","i","ID","elemento","propertyValue","getElementsByClassName","style","display","innerHTML","visibility","src","setAttribute","nombreLP","fetchPlanes","api","fetch","then","response","json","myJson","checkContainerPlanes","totalContainer","window","onload"],"mappings":"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","file":"planesGenerator.min.js","sourcesContent":["// Lee JSON y genera info de planes\r\n\r\nvar apiPlanes = document.location.origin \r\n+ '/php/Spreadsheet.json';\r\nvar planesJson;\r\nvar contenedoresParaActualizar = [];\r\nvar jsonDataContenedor = [];\r\n\r\n$(function () {\r\n  'use strict';\r\n  // busca contenedores de plan con id valido\r\n  function filtraContenedoresMasDatos() {\r\n    var contenedoresPlanes = document\r\n    .querySelectorAll('[class^=\"js__id-plan-\"]');\r\n    for (var x = 0; x < contenedoresPlanes.length; x++) {\r\n      var largoDeClase = (contenedoresPlanes[x].classList[0]).length;\r\n      var idDeClase = (contenedoresPlanes[x].classList[0]).slice(12);\r\n      // largoDeClase valida que la clase tenga mas de 12 carateres\r\n      if (largoDeClase > 12) {\r\n        contenedoresParaActualizar.push(contenedoresPlanes[x]);\r\n        jsonDataContenedor.push(idDeClase);\r\n      }\r\n    }\r\n  }\r\n  \r\n  function promedioDescuento(tipo) {\r\n    var total = 0;\r\n    var count = 0;\r\n    for (var x = 0; x < planesJson.length; x++) {\r\n      if (planesJson[x]['Producto'] === tipo) {\r\n        total = total + parseInt(planesJson[x]['% OFF']);\r\n        count++; \r\n      }\r\n    }\r\n    return total / count;\r\n  }\r\n\r\n  // invierte la posicion de las comas\r\n  function swapPuntoComaPlanes(ammount) {\r\n    return ammount.toLocaleString().replace(',', 'D').replace(',', '.').replace('D', '.').replace(',00', '');\r\n  }\r\n  \r\n  function formatoDatosAntes(precioString, unidad) {\r\n    var ammount = (precioString < 1) ? (precioString * 1000) : precioString.replace('.', ',');\r\n    ammount = (unidad === 'GB' && precioString < 1) ? (ammount += 'MB') : (ammount += unidad);\r\n    return ammount;\r\n  }\r\n  \r\n  function llenarPlanes() {\r\n    for (var i = 0; i < contenedoresParaActualizar.length; i++) {\r\n      for (var x = 0; x < planesJson.length; x++) {\r\n        if (planesJson[x].ID === jsonDataContenedor[i]) {\r\n          var elemento = contenedoresParaActualizar[i];\r\n          var propertyValue = planesJson[x]['Nombre Plan'] + ' ' + planesJson[x]['Capacidad Plan'] + planesJson[x]['Unidad Capacidad'];\r\n          \r\n          ((planesJson[x]['% OFF'] === '') && (elemento.getElementsByClassName('js-precio-off').length > 0))\r\n          ? ((elemento.getElementsByClassName('js-precio-off')[0].style.display = 'none'),\r\n          (elemento.getElementsByClassName('js-precio-regular')[0].style.display = 'block'))\r\n          : null;\r\n\r\n          ((planesJson[x]['% OFF'] !== '') && (elemento.getElementsByClassName('js-precio-off').length > 0))\r\n          ? ((elemento.getElementsByClassName('js-precio-off')[0].style.display = 'block'),\r\n          (elemento.getElementsByClassName('js-precio-regular')[0].style.display = 'none'))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-descuento').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-descuento')[0].innerHTML = planesJson[x]['% OFF'])            \r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-precio-mes-regular').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-precio-mes-regular')[0].innerHTML = swapPuntoComaPlanes(parseInt(planesJson[x]['Full Price'].slice(0, -3))))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-promedio-descuento-portabilidad').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-promedio-descuento-portabilidad')[0].innerHTML = promedioDescuento('Portabilidad'))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-capacidad-unidad').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-capacidad-unidad')[0].innerHTML = planesJson[x]['Unidad Capacidad'])\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-precio-mes-promo').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-precio-mes-promo')[0].innerHTML = swapPuntoComaPlanes(parseInt(planesJson[x]['Precio Oferta'].slice(0, -3))))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-precio-mes-regular-sin-promo').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-precio-mes-regular-sin-promo')[0].innerHTML = swapPuntoComaPlanes(parseInt(planesJson[x]['Full Price'].slice(0, -3))))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-precio-mes-regular').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-precio-mes-regular')[0].innerHTML = swapPuntoComaPlanes(parseInt(planesJson[x]['Full Price'].slice(0, -3))))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-gigas').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-gigas')[0].innerHTML = planesJson[x]['Capacidad Plan'].replace('.', ','))\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-nombre').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-nombre')[0].innerHTML = planesJson[x]['Nombre Plan'])\r\n          : null;\r\n          \r\n          (elemento.getElementsByClassName('js__plan-duracion').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-duracion')[0].innerHTML = planesJson[x]['DuraciÃ³n'])\r\n          : null;\r\n          \r\n          (planesJson[x]['Promo Hotsale'] === 'Si' \r\n          && elemento.getElementsByClassName('js__plan-hotsale').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-hotsale')[0].style.visibility = 'visible', elemento.getElementsByClassName('js__plan-hotsale')[0].src = 'images/global/HotSale_alta.png')\r\n          : null;\r\n          \r\n          (planesJson[x]['Promo Hotweek'] === 'Si' && elemento.getElementsByClassName('js__plan-hotweek').length > 0)\r\n          ? elemento.getElementsByClassName('js__plan-hotweek')[0].style.visibility = 'visible'\r\n          : null;\r\n          \r\n          (planesJson[x]['Capacidad Plan Anterior'] !== ''\r\n          && elemento.getElementsByClassName('js__plan-gigas-antes').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-gigas-antes-numero')[0].innerHTML = formatoDatosAntes(planesJson[x]['Capacidad Plan Anterior'], planesJson[x]['Unidad Capacidad']))\r\n          : null;  \r\n          \r\n          (elemento.getElementsByClassName('js__plan-data-attributes').length > 0)\r\n          ? (elemento.getElementsByClassName('js__plan-data-attributes')[0].setAttribute('data-modal-title', propertyValue),\r\n          elemento.getElementsByClassName('js__plan-data-attributes')[0].setAttribute('data-accion', propertyValue),\r\n          elemento.getElementsByClassName('js__plan-data-attributes')[0].setAttribute('data-valor-plan', propertyValue),\r\n          elemento.getElementsByClassName('js__plan-data-attributes')[0].setAttribute('data-nombre-landing', nombreLP))\r\n          : null;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  function fetchPlanes(api) {\r\n    fetch(api)\r\n    .then(function (response) {\r\n      return response.json();\r\n    })\r\n    .then(function (myJson) {\r\n      planesJson = myJson;\r\n      filtraContenedoresMasDatos();\r\n      llenarPlanes();\r\n    });\r\n  }\r\n  \r\n  // buscar js__plan-precio-mes en el DOM\r\n  function checkContainerPlanes() {\r\n    var totalContainer = document.querySelectorAll('[class^=\"js__contenedor-de-planes\"]');\r\n    if (totalContainer.length > 0) {\r\n      fetchPlanes(apiPlanes);\r\n    } \r\n  }\r\n  \r\n  window.onload = function () {\r\n    checkContainerPlanes();\r\n  };\r\n});\r\n"]}