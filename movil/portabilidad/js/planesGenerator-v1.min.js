"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var s=0,a=Array(e.length);s<e.length;s++)a[s]=e[s];return a}}var planesJson,apiPlanes=function(){return"test.ddsuite.net"==document.location.host||"localhost:3000"==document.location.host?"php/Spreadsheet.json":document.location.origin+"/php/Spreadsheet.json"},contenedoresParaActualizar=[],jsonDataContenedor=[],meses=["placeHolderForIndex0","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];$(function(){function e(){for(var e=document.querySelectorAll('[class^="js__id-plan-"]'),s=0;s<e.length;s++){var a=e[s].classList[0].length,n=e[s].classList[0].slice(12);12<a&&(contenedoresParaActualizar.push(e[s]),jsonDataContenedor.push(n))}}function s(){for(var e=[],s=0;s<planesJson.length;s++)("SI"===planesJson[s]["Promo Hotweek"]||"Si"===planesJson[s]["Promo Hotweek"])&&e.push(planesJson[s].Producto);return e}function a(e){var s=new Date(e[0]),a=new Date(e[1]),n=new Date;return!!(s<n&&a>n)}function n(e){for(var s=0,a=0,n=0;n<planesJson.length;n++)planesJson[n].Producto===e&&(s+=parseInt(planesJson[n]["% OFF"]),a++);return s/a}function l(e){var s=planesJson.filter(function(s){return s.Producto===e}),a=s.map(function(e){var s=parseInt(e["% OFF"]);return isNaN(s)?0:s});return Math.max.apply(Math,_toConsumableArray(a))}function t(e,s){var a=1>e?1e3*e:e.replace(".",",");return a=a+="GB"===s&&1>e?"MB":s,a}function o(){for(var e=0;e<contenedoresParaActualizar.length;e++)for(var s=0;s<planesJson.length;s++)if(planesJson[s].ID===jsonDataContenedor[e]){var a,o,i=contenedoresParaActualizar[e];console.log(_typeof(planesJson[s]["Precio de Lista"])),0<i.getElementsByClassName("js-precio-off").length&&(""===planesJson[s]["% OFF"]?(i.getElementsByClassName("js-precio-off")[0].style.display="none",i.getElementsByClassName("js-precio-regular")[0].style.display="block"):(i.getElementsByClassName("js-precio-off")[0].style.display="block",i.getElementsByClassName("js-precio-regular")[0].style.display="none")),0<i.getElementsByClassName("js-plan-descuentomayor-producto").length&&(i.getElementsByClassName("js-plan-descuentomayor-producto")[0].innerHTML=l(planesJson[s].Producto)),""!==planesJson[s]["Copy % off hotweek"]&&0<i.getElementsByClassName("js__plan-copystickerdescuento").length&&(i.getElementsByClassName("js__plan-copystickerdescuento")[0].innerHTML=planesJson[s]["Copy % off hotweek"]),"Si"===planesJson[s]["Sticker Exclusivo Promo online Banner"]&&0<i.getElementsByClassName("js-exclusivo-online-banner").length&&(i.getElementsByClassName("js-exclusivo-online-banner")[0].style.display="block"),void 0!==planesJson[s]["Precio de Lista"]&&""!==planesJson[s]["Precio de Lista"]&&0<i.getElementsByClassName("js__plan-precio-de-lista").length&&(i.getElementsByClassName("js__plan-precio-de-lista")[0].innerHTML=planesJson[s]["Precio de Lista"],i.getElementsByClassName("js__plan-precio-de-lista")[0].parentNode.style.display="block"),void 0!==planesJson[s]["Precio de Lista"]&&""!==planesJson[s]["Precio de Lista"]&&0<i.getElementsByClassName("js__plan-precio-de-lista-toggle").length&&(i.getElementsByClassName("js__plan-precio-de-lista-toggle")[0].style.display="inline"),void 0!==planesJson[s]["Precio de Lista"]&&""!==planesJson[s]["Precio de Lista"]&&0<i.getElementsByClassName("js__plan-precio-vigente-descuento").length&&(i.getElementsByClassName("js__plan-precio-vigente-descuento")[0].style.display="inline"),0<i.getElementsByClassName("js__plan-descuento").length&&(""===planesJson[s]["% OFF"]?i.getElementsByClassName("js__plan-descuento")[0].parentNode.remove():i.getElementsByClassName("js__plan-descuento")[0].innerHTML=planesJson[s]["% OFF"]),0<i.getElementsByClassName("singlePlanMigracionesToggle").length&&""===planesJson[s]["% OFF"]&&i.getElementsByClassName("singlePlanMigracionesToggle")[0].remove(),0<i.getElementsByClassName("js__plan-promedio-descuento-portabilidad").length&&(i.getElementsByClassName("js__plan-promedio-descuento-portabilidad")[0].innerHTML=n("Portabilidad")),0<i.getElementsByClassName("js__plan-capacidad-unidad").length&&(i.getElementsByClassName("js__plan-capacidad-unidad")[0].innerHTML=planesJson[s]["Unidad Capacidad"]),""!==planesJson[s]["Legales Plan"]&&0<i.getElementsByClassName("js__url-legales-plan").length&&(i.getElementsByClassName("js__url-legales-plan")[0].href=planesJson[s]["Legales Plan"]),""!==planesJson[s]["Legales Promocion"]&&0<i.getElementsByClassName("js__url-legales-promo").length&&(i.getElementsByClassName("js__url-legales-promo")[0].style.display="block")&&(i.getElementsByClassName("js__url-legales-promo")[0].href=planesJson[s]["Legales Promocion"]),0<i.getElementsByClassName("js__plan-precio-oferta").length&&""!==planesJson[s]["Precio Oferta"]&&(i.getElementsByClassName("js__plan-precio-oferta")[0].innerHTML=C(parseInt(planesJson[s]["Precio Oferta"].slice(0,-3)))),0<i.getElementsByClassName("js__plan-precio-oferta").length&&""===planesJson[s]["Precio Oferta"]&&""!==planesJson[s]["Full Price"]&&(i.getElementsByClassName("planesMovistar__priceTarifaAnterior--b")[0].remove(),i.getElementsByClassName("js__plan-precio-oferta")[0].innerHTML=C(parseInt(planesJson[s]["Full Price"].slice(0,-3)))),0<i.getElementsByClassName("js__nuevo-precio").length&&(i.getElementsByClassName("js__nuevo-precio")[0].innerHTML=C(parseInt(planesJson[s]["Nuevo Precio"].slice(0,-3)))),0<i.getElementsByClassName("js__plan-full-price").length&&(i.getElementsByClassName("js__plan-full-price")[0].innerHTML=C(parseInt(planesJson[s]["Full Price"].slice(0,-3)))),0<i.getElementsByClassName("js__plan-full-price-migraciones").length&&(i.getElementsByClassName("js__plan-full-price-migraciones")[0].innerHTML=C(parseInt(planesJson[s]["Full Price"].slice(0,-3)))),0<i.getElementsByClassName("js__plan-gigas").length&&(i.getElementsByClassName("js__plan-gigas")[0].innerHTML=planesJson[s]["Capacidad Plan"].replace(".",",")),0<i.getElementsByClassName("js__plan-nombre").length&&(i.getElementsByClassName("js__plan-nombre")[0].innerHTML=planesJson[s]["Nombre Plan"]),0<i.getElementsByClassName("js__plan-pocode").length&&(i.getElementsByClassName("js__plan-pocode")[0].href=planesJson[s].Pocode),0<i.getElementsByClassName("js__plan-duracion").length&&(i.getElementsByClassName("js__plan-duracion")[0].innerHTML=planesJson[s].Duración),"Si"===planesJson[s]["Promo Hotsale"]&&0<i.getElementsByClassName("js__plan-hotsale").length&&(i.getElementsByClassName("js__plan-hotsale")[0].style.visibility="visible",i.getElementsByClassName("js__plan-hotsale")[0].src="images/global/hotsale.png"),"No"===planesJson[s].MovistarPlay&&0<i.getElementsByClassName("js__movistar-play").length&&i.getElementsByClassName("js__movistar-play")[0].remove(),"Si"===planesJson[s].MovistarPlay&&0<i.getElementsByClassName("js__movistar-play").length&&(i.getElementsByClassName("js__movistar-play")[0].style.display="block"),"No"!==planesJson[s]["Pasá Gigas Planes"]&&""!==planesJson[s]["Pasá Gigas Planes"]&&0<i.getElementsByClassName("js__pasa-gigas-activa").length&&0<i.getElementsByClassName("js__movistar-play").length&&(a=i.getElementsByClassName("js__movistar-play")[0].children[0],o=i.getElementsByClassName("js__pasa-gigas-activa")[0].children[0],i.getElementsByClassName("js__movistar-play")[0].children[0].replaceWith(o),i.getElementsByClassName("js__pasa-gigas-activa")[0].replaceWith(a)),"No"!==planesJson[s]["Pasá Gigas Planes"]&&""!==planesJson[s]["Pasá Gigas Planes"]&&0<i.getElementsByClassName("js__pasa-gigas-activa").length&&0>=i.getElementsByClassName("js__movistar-play").length&&(o=i.getElementsByClassName("js__pasa-gigas-activa")[0].children[0],i.getElementsByClassName("js__pasa-gigas-activa")[0].style.display="block",i.getElementsByClassName("planesMovistar__boton")[0].after(o)),("No"===planesJson[s]["Pasá Gigas Planes"]||""===planesJson[s]["Pasá Gigas Planes"])&&0<i.getElementsByClassName("js__pasa-gigas-activa").length&&0<i.getElementsByClassName("js__movistar-play").length&&(a=i.getElementsByClassName("js__movistar-play")[0].children[0],i.getElementsByClassName("js__pasa-gigas-novedad")[0].before(a),i.getElementsByClassName("js__pasa-gigas-novedad")[0].style.display="block"),("No"===planesJson[s]["Pasá Gigas Planes"]||""===planesJson[s]["Pasá Gigas Planes"])&&0<i.getElementsByClassName("js__pasa-gigas-activa").length&&0>=i.getElementsByClassName("js__movistar-play").length&&(i.getElementsByClassName("js__pasa-gigas-novedad")[0].style.display="block"),"Si"===planesJson[s].CyberMonday&&0<i.getElementsByClassName("js__plan-cyberMonday").length&&(i.getElementsByClassName("js__plan-cyberMonday")[0].style.visibility="visible",i.getElementsByClassName("js__plan-cyberMonday")[0].src="images/global/cybermonday.png"),"Si"===planesJson[s].CyberWeek&&0<i.getElementsByClassName("js__plan-cyberWeek").length&&(i.getElementsByClassName("js__plan-cyberWeek")[0].style.visibility="visible",i.getElementsByClassName("js__plan-cyberWeek")[0].src="images/global/cyberweek.png"),"Si"===planesJson[s]["Sticker Exclusivo Promo online Banner"]&&0<i.getElementsByClassName("js__plan-promoExclusivaOnline").length&&(i.getElementsByClassName("js__plan-promoExclusivaOnline")[0].style.visibility="visible",i.getElementsByClassName("js__plan-promoExclusivaOnline")[0].src="images/iconos/promo_exclsuiva_online_rosa.png"),"Si"===planesJson[s]["Sticker Exclusivo Promo online Banner"]&&0<i.getElementsByClassName("js__plan-promoExclusivaOnlineNew").length&&(i.getElementsByClassName("js__plan-promoExclusivaOnlineNew")[0].style.visibility="visible"),""!==planesJson[s]["Pasa Gigas Banner Sticker"]&&"No"!==planesJson[s]["Pasa Gigas Banner Sticker"]?"No"!==planesJson[s]["Amazon Prime"]&&""!==planesJson[s]["Amazon Prime"]&&0<i.getElementsByClassName("js__plan-primeVideo").length&&(i.getElementsByClassName("js__plan-primeVideo")[0].style.visibility="visible",i.getElementsByClassName("js__plan-primeVideo")[0].src="images/global/pasagigas.png"):"No"!==planesJson[s]["Amazon Prime"]&&""!==planesJson[s]["Amazon Prime"]&&"No"!==planesJson[s]["Amazon Prime Precio"]&&""!==planesJson[s]["Amazon Prime Precio"]&&0<i.getElementsByClassName("js__plan-primeVideo").length&&(i.getElementsByClassName("js__plan-primeVideo")[0].style.visibility="visible",i.getElementsByClassName("js__plan-primeVideo")[0].src="images/global/porta-planes-cuca.png"),"No"!==planesJson[s]["Amazon Prime"]&&""!==planesJson[s]["Amazon Prime"]&&0<i.getElementsByClassName("js__plan-AmazonPrime").length&&(i.getElementsByClassName("js__plan-AmazonPrime")[0].style.display="block",i.getElementsByClassName("js__plan-primeVideoMeses")[0].innerHTML=planesJson[s]["Amazon Prime"],"No"===planesJson[s]["Amazon Prime Precio"]||(i.getElementsByClassName("js__plan-primeVideoPrecio")[0].innerHTML=planesJson[s]["Amazon Prime Precio"])),(""===planesJson[s]["Amazon Prime Precio"]||"No"===planesJson[s]["Amazon Prime Precio"])&&0<i.getElementsByClassName("js__plan-AmazonPrime").length&&0<i.getElementsByClassName("js__plan-primeVideoSinPrecio").length&&i.getElementsByClassName("js__plan-primeVideoSinPrecio")[0].remove(),("Si"===planesJson[s]["Promo Hotweek"]||"SI"===planesJson[s]["Promo Hotweek"])&&0<i.getElementsByClassName("js__plan-hotweek").length&&(i.getElementsByClassName("js__plan-hotweek")[0].style.visibility="visible"),"Si"===planesJson[s]["Promo BlackFriday Planes"]&&0<i.getElementsByClassName("js__plan-blackFriday").length&&(i.getElementsByClassName("js__plan-blackFriday")[0].style.visibility="visible",i.getElementsByClassName("js__plan-blackFriday")[0].src="images/global/blackfriday.png"),""!==planesJson[s]["Capacidad Plan Anterior"]&&0<i.getElementsByClassName("js__plan-gigas-antes").length&&(i.getElementsByClassName("js__plan-gigas-antes-numero")[0].innerHTML=t(planesJson[s]["Capacidad Plan Anterior"],planesJson[s]["Unidad Capacidad"]),i.getElementsByClassName("js__plan-gigas-antes")[0].style.visibility="visible"),0<i.getElementsByClassName("js__plan-data-attributes").length&&(i.getElementsByClassName("js__plan-data-attributes")[0].setAttribute("data-modal-title",planesJson[s]["Nombre Plan"]),i.getElementsByClassName("js__plan-data-attributes")[0].setAttribute("data-accion",planesJson[s]["Nombre Plan"]),i.getElementsByClassName("js__plan-data-attributes")[0].setAttribute("data-valor-plan",planesJson[s]["Nombre Plan"]),i.getElementsByClassName("js__plan-data-attributes")[0].setAttribute("data-nombre-landing",nombreLP)),"Si"===planesJson[s].LlamadasCualquierCompañía&&0<i.getElementsByClassName("js-minutos-compania").length&&(i.getElementsByClassName("js-minutos-compania")[0].style.display="block"),"Si"===planesJson[s].Roaming&&0<i.getElementsByClassName("js-roaming-gratis-mundial").length&&(i.getElementsByClassName("js-roaming-gratis-mundial")[0].style.display="block"),"Si"===planesJson[s].LlamadasMovistar&&0<i.getElementsByClassName("js-minutos-operador").length&&(i.getElementsByClassName("js-minutos-operador")[0].style.display="block"),"Si"===planesJson[s].MensajesMovistar&&0<i.getElementsByClassName("js-extra-mensajea").length&&(i.getElementsByClassName("js-extra-mensajea")[0].style.display="block"),"Si"===planesJson[s].Whatsapp&&0<i.getElementsByClassName("js-extra-whatsapp").length&&(i.getElementsByClassName("js-extra-whatsapp")[0].style.display="block"),""!==planesJson[s].Extra&&0<i.getElementsByClassName("js-beneficio-extra").length&&(i.getElementsByClassName("js-beneficio-extra")[0].style.display="block",i.getElementsByClassName("js-beneficio-extra-copy")[0].innerHTML=planesJson[s].Extra),"Si"===planesJson[s].TestDrive&&0<i.getElementsByClassName("js-capacidad-navegación-extra").length&&(i.getElementsByClassName("js-capacidad-navegación-extra")[0].style.display="block"),"Si"===planesJson[s].FamiliaMovistar&&0<i.getElementsByClassName("js-planes-familia-movistar").length&&(i.getElementsByClassName("js-planes-familia-movistar")[0].style.display="block")}}function i(){for(var e=".js__portabilidad",s="data-activate-call-me-back",a=document.querySelectorAll(e)[0],n=0;n<planesJson.length;n++)"1"===planesJson[n].ID&&"SI"===planesJson[n]["Boton 0800"]&&a&&a.setAttribute(s,"true")}function r(){function e(e,s){for(var a=0;a<e.length;a++)e[a].style.display=s}var s=document.querySelector(".tabsNav.active"),a=document.querySelectorAll(".js-llamar-flotante"),n=document.querySelectorAll(".botonera-mobile"),l=document.querySelectorAll(".contactWrapper"),t=document.querySelectorAll(".js-modal-phone-container"),o=document.querySelectorAll(".Llamar-FlotanteDisponibilidad");"true"!==s.getAttribute("data-activate-call-me-back")?(e(a,"none"),e(n,"none"),e(l,"none"),e(t,"none"),e(o,"none")):(e(t,"block"),e(l,"block"),e(a,"block"))}function m(s){fetch(s).then(function(e){return e.json()}).then(function(s){planesJson=s,0<$(".js-main-migraciones").length&&_(),i(),r(),e(),o(),u()})}var p=function(e){for(var s=0;s<planesJson.length;s++)if(planesJson[s].ID==e)return planesJson[s]},c=function(e,s,a){e.nextElementSibling.style.display="block",e.nextElementSibling.style.visibility="visible",e.nextElementSibling.getElementsByClassName("jsFlipClockDate")[0].innerHTML="Del ".concat(s.split(", ")[2]," al ").concat(a.split(", ")[2]," ").concat(meses[parseInt(s.split(", ")[1])]),g(a,e.nextElementSibling),e.remove()},g=function(e,s){var a=new Date(e),n=s.getElementsByClassName("clock")[0],l=new Date,t=a.getTime()/1e3+86400-l.getTime()/1e3;n.className+=100>function(e,s){return(s-e)/864e5}(l,a)?" twoDayDigits":" threeDayDigits",0>t&&(t=0),$(n).FlipClock(t,{clockFace:"DailyCounter",countdown:!0,language:"es"})},y=function(){return Array.from(document.querySelectorAll('[class*="js__hotweekSwitch-"]'))},_=function(){var e=d(),s=Array.from(document.querySelectorAll(".js__id-plan-"));if(isNaN(parseInt(e))){var a=Array.from(document.getElementsByClassName("singlePlanMigracionesToggle"));a.forEach(function(e){e.remove()})}else s.forEach(function(s){s.classList.remove("js__id-plan-"),s.className="js__id-plan-"+e+" "+s.className}),document.getElementsByClassName("migracionesMultiPlanToggle")[0].remove()},d=function(){var e=document.URL,s=new URL(e),a=s.searchParams.get("planID");return parseInt(a)},u=function(){var e=y(),n=s();e.forEach(function(e){var s=e.querySelectorAll('[class^="js__id-plan-"]')[0].classList[0].slice(12);if(""!=s){var l=p(s),t=N(l["Fecha Promo Hotweek"]);n.includes(l.Producto)&&a(t)&&c(e,t[0],t[1])}})},N=function(e){if(""===e)return"";var s=e.split(" "),a=s[0].replace("/","/").split("/").join(", "),n=s[1].replace("/","/").split("/").join(", ");return s=[a,n],s},C=function(e){return e.toLocaleString().replace(",","D").replace(",",".").replace("D",".").replace(",00","")};$(document).ready(function(){m(apiPlanes())})});